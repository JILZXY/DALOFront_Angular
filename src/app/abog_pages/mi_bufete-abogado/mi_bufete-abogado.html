<div class="mi-bufete-container">
    <div class="header-banner">
        <button class="btn-volver" (click)="volver()">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="11" stroke="#1a2b3c" stroke-width="2" />
                <path d="M14 8l-4 4 4 4" stroke="#1a2b3c" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
        </button>
        <div class="banner-content">
            <div class="banner-image" style="background-image: url('/Images/background.png');"></div>
            <div class="bufete-identity">
                <div class="logo-circle">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3 21h18M5 21v-7m14 7v-7m-7 7v-9m-7-2h14l-1-6H6l-1 6zm4 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"
                            stroke="#1a2b3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <h1>{{ bufeteActual?.nombre || 'Cargando...' }}</h1>
            </div>
        </div>
    </div>

    <div class="main-content">
        <!-- Solicitudes Pendientes (Solo Admin) -->
        <div class="requests-section" *ngIf="esAdmin && solicitudesPendientes.length > 0"
            style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #ffeeba;">
            <h3 style="color: #856404; margin-top: 0;">üìã Solicitudes Pendientes ({{ solicitudesPendientes.length }})</h3>
            <div *ngFor="let solicitud of solicitudesPendientes"
                style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #dee2e6; padding: 10px 0;">
                <div>
                    <strong>{{ solicitud.abogado?.usuario?.nombre || 'Abogado' }}</strong> quiere unirse.
                    <br>
                    <small>{{ solicitud.fechaSolicitud | date:'short' }}</small>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button (click)="aprobarSolicitud(solicitud.id)"
                        style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
                        ‚úÖ Aprobar
                    </button>
                    <button (click)="rechazarSolicitud(solicitud.id)"
                        style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
                        ‚ùå Rechazar
                    </button>
                </div>
            </div>
        </div>

        <div class="left-column">
            <div class="filter-section">
                <h2>Encuentre a nuestros abogados seg√∫n la especialidad que requiera</h2>
                <div class="filter-buttons">
                    <button [class.active]="selectedFilter === 'PENAL'" (click)="setFilter('PENAL')">PENAL</button>
                    <button [class.active]="selectedFilter === 'CIVIL'" (click)="setFilter('CIVIL')">CIVIL</button>
                    <button [class.active]="selectedFilter === 'MERCANTIL'"
                        (click)="setFilter('MERCANTIL')">MERCANTIL</button>
                    <button [class.active]="selectedFilter === 'CONSTITUCIONAL'"
                        (click)="setFilter('CONSTITUCIONAL')">CONSTITUCIONAL</button>
                </div>
            </div>

            <div class="abogados-list">
                <div class="abogado-card-simple" *ngFor="let abogado of filteredAbogados; let i = index">
                    <div class="ranking-badge">#{{ i + 1 }}</div>
                    <div class="card-content-simple">
                        <div class="avatar-simple">
                            <img src="/Images/logo azul.png" alt="Avatar">
                        </div>
                        <div class="info-simple">
                            <h3>{{ getNombreAbogado(abogado) }}</h3>
                            <p class="specialty">{{ getEspecialidadPrincipal(abogado) }}</p>
                            <p class="bufete-name">Bufete: {{ bufeteActual?.nombre || 'Mi Bufete' }}</p>
                            <p class="location">
                                <span class="pin-icon">üìç</span> {{ getUbicacion(abogado) }}
                            </p>
                        </div>
                        <div class="rating-simple">
                            <span>CALIFICACI√ìN GENERAL</span>
                            <span class="score">{{ getCalificacion(abogado).toFixed(1) }}/5.0</span>
                        </div>
                    </div>
                </div>

                <!-- Mensaje si no hay abogados con esa especialidad -->
                <div *ngIf="filteredAbogados.length === 0" style="text-align: center; padding: 40px; color: #666;">
                    <p>‚ö†Ô∏è No hay abogados con la especialidad "{{ selectedFilter }}" en este bufete.</p>
                </div>
            </div>
        </div>

        <div class="right-column">
            <div class="profile-card">
                <div class="profile-avatar">
                    <img src="/Images/logo azul.png" alt="Profile">
                </div>
                <h3>{{ currentUser?.nombre || 'Cargando usuario...' }}</h3>
                <p class="location">üìç {{ currentUser?.municipio?.nombre || 'Sin ubicaci√≥n' }}</p>

                <div class="specialty-icons" *ngIf="getEspecialidadUsuario()">
                    <div class="spec-icon">
                        <div class="icon-box">‚öñÔ∏è</div>
                        <span>{{ getEspecialidadUsuario() }}</span>
                    </div>
                </div>

                <button class="btn-salir" (click)="salirDelBufete()">
                    üö™ SALIR DEL BUFETE
                </button>

                <div *ngIf="esAdmin" style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 6px; font-size: 12px; color: #856404; text-align: center;">
                    ‚≠ê Eres el administrador
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mi-bufete-container">        
  <div class="header-banner">...</div>
  <div class="main-content">            
    <div class="left-column">...</div>
    <div class="right-column">...</div>
  </div>                                 
</div>                                   