<div class="mi-bufete-container">
    <div class="header-banner">
        <button class="btn-volver" (click)="volver()">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="11" stroke="#1a2b3c" stroke-width="2" />
                <path d="M14 8l-4 4 4 4" stroke="#1a2b3c" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
        </button>
        <div class="banner-content">
            <!-- Banner image placeholder -->
            <div class="banner-image" style="background-image: url('/Images/background.png');"></div>
            <div class="bufete-identity">
                <div class="logo-circle">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3 21h18M5 21v-7m14 7v-7m-7 7v-9m-7-2h14l-1-6H6l-1 6zm4 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"
                            stroke="#1a2b3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <h1>RODRIGUEZ Y ASOCIADOS</h1>
            </div>
        </div>
    </div>

    <div class="main-content">
        <!-- Requests Section (Admin) -->
        <div class="requests-section" *ngIf="(solicitudes$ | async)?.length"
            style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #ffeeba;">
            <h3 style="color: #856404; margin-top: 0;">Solicitudes Pendientes</h3>
            <div *ngFor="let solicitud of (solicitudes$ | async)"
                style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #dee2e6; padding: 10px 0;">
                <div>
                    <strong>{{ solicitud.abogado?.usuario?.nombre || 'Abogado' }}</strong> quiere unirse.
                    <br>
                    <small>{{ solicitud.fechaSolicitud | date }}</small>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button (click)="aprobarSolicitud(solicitud.id)"
                        style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Aprobar</button>
                    <button (click)="rechazarSolicitud(solicitud.id)"
                        style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Rechazar</button>
                </div>
            </div>
        </div>

        <div class="left-column">
            <div class="filter-section">
                <h2>Encuentre a nuestros abogados segun la especialidad que requiera</h2>
                <div class="filter-buttons">
                    <button [class.active]="selectedFilter === 'PENAL'" (click)="setFilter('PENAL')">PENAL</button>
                    <button [class.active]="selectedFilter === 'CIVIL'" (click)="setFilter('CIVIL')">CIVIL</button>
                    <button [class.active]="selectedFilter === 'MERCANTIL'"
                        (click)="setFilter('MERCANTIL')">MERCANTIL</button>
                    <button [class.active]="selectedFilter === 'CONSTITUCIONAL'"
                        (click)="setFilter('CONSTITUCIONAL')">CONSTITUCIONAL</button>
                </div>
            </div>

            <div class="abogados-list">
                <div class="abogado-card-simple" *ngFor="let abogado of filteredAbogados">
                    <div class="ranking-badge">#{{ abogado.ranking }}</div>
                    <div class="card-content-simple">
                        <div class="avatar-simple">
                            <img [src]="abogado.foto" alt="Avatar">
                        </div>
                        <div class="info-simple">
                            <h3>{{ abogado.nombre }}</h3>
                            <p class="specialty">{{ abogado.especialidad }}</p>
                            <p class="bufete-name">Buffet: {{ abogado.bufete }}</p>
                            <p class="location">
                                <span class="pin-icon">üìç</span> {{ abogado.ubicacion }}
                            </p>
                        </div>
                        <div class="rating-simple">
                            <span>CALIFICACI√ìN GENERAL</span>
                            <span class="score">{{ (abogado.calificacion || 0).toFixed(1) }}/5.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="right-column">
            <div class="profile-card">
                <div class="profile-avatar">
                    <img src="/Images/logo azul.png" alt="Profile">
                </div>
                <h3>JESHUA GABRIEL M√ÅRQUEZ CASTA√ëO</h3>
                <p class="location">üìç Tapachula, Chiapas.</p>

                <div class="specialty-icons">
                    <div class="spec-icon">
                        <div class="icon-box">‚öñÔ∏è</div>
                        <span>DERECHO PENAL</span>
                    </div>
                    <div class="spec-icon">
                        <div class="icon-box">‚ôüÔ∏è</div>
                        <span>DERECHO CIVIL</span>
                    </div>
                </div>

                <button class="btn-salir" (click)="salirDelBufete()">SALIR DEL BUFETE</button>
            </div>
        </div>
    </div>
</div>