<div class="header-wrapper">
  <!-- Header superior -->
  <header class="main-header">
    <div class="header-container">
      <!-- Botón de menú (hamburguesa) -->
      <button class="menu-toggle-btn" (click)="toggleSidebar()" *ngIf="isAuthenticated$ | async">
        ☰
      </button>

      <!-- Logo -->
      <div class="logo">
        <a routerLink="/">DALO</a>
      </div>

      <!-- Usuario info (desktop) -->
      <div class="user-section" *ngIf="isAuthenticated$ | async">
        <span class="user-name">{{ userName }}</span>
        <span class="user-role">({{ userRole }})</span>
      </div>
    </div>
  </header>

  <!-- Overlay para cerrar sidebar -->
  <div class="sidebar-overlay" [class.active]="isOpen" (click)="closeSidebar()"></div>

  <!-- SIDEBAR PARA CLIENTE (ROL 1) -->
  <aside class="sidebar" [class.active]="isOpen" *ngIf="isCliente()">
    <div class="sidebar-header">
      <div class="user-info-slide">
        <h3 class="user-name-slide">{{ userName }}</h3>
        <p class="user-role-slide">{{ userRole }}</p>
      </div>
      <button class="menu-close" (click)="closeSidebar()" aria-label="Cerrar menú">
        &times;
      </button>
    </div>

    <nav class="sidebar-menu">
      <a routerLink="/usuario/home" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/home.png" alt="Inicio" onerror="this.style.display='none'"> Inicio
      </a>
      <a routerLink="/usuario/mis-preguntas" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/mis_preguntas.png" alt="Mis Preguntas" onerror="this.style.display='none'"> Mis Preguntas
      </a>
      <a routerLink="/usuario/publicar" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/publicar.png" alt="Publicar" onerror="this.style.display='none'"> Publicar Pregunta
      </a>
      <a routerLink="/usuario/chat" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/chat.png" alt="Chat" onerror="this.style.display='none'"> Chat
      </a>
      <a routerLink="/usuario/contactar" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/contactar.png" alt="Contactar" onerror="this.style.display='none'"> Contactar Abogado
      </a>
      <a routerLink="/usuario/faq" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/faq.png" alt="FAQ" onerror="this.style.display='none'"> Preguntas Frecuentes
      </a>
      <a routerLink="/usuario/ayuda" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/ayuda.png" alt="Ayuda" onerror="this.style.display='none'"> Ayuda
      </a>
    </nav>

    <div class="sidebar-footer">
      <a href="#" class="menu-item logout" (click)="logout($event)">
        <img src="/Images/salir.png" alt="Salir" onerror="this.style.display='none'"> Salir
      </a>
    </div>
  </aside>

  <!-- SIDEBAR PARA ABOGADO (ROL 2) -->
  <aside class="sidebar" [class.active]="isOpen" *ngIf="isAbogado()">
    <div class="sidebar-header">
      <div class="user-info-slide">
        <h3 class="user-name-slide">{{ userName }}</h3>
        <p class="user-role-slide">{{ userRole }}</p>
      </div>
      <button class="menu-close" (click)="closeSidebar()" aria-label="Cerrar menú">
        &times;
      </button>
    </div>

    <nav class="sidebar-menu">
      <a routerLink="/abogado/foro" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/foro.png" alt="Foro" onerror="this.style.display='none'"> Foro
      </a>
      <a routerLink="/abogado/consultas" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/consultas.png" alt="Consultas" onerror="this.style.display='none'"> Consultas
      </a>
      <a routerLink="/abogado/mis-respuestas" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/mis_respuestas.png" alt="Respuestas" onerror="this.style.display='none'"> Mis Respuestas
      </a>
      <a routerLink="/abogado/estadisticas" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/estadisticas.png" alt="Estadísticas" onerror="this.style.display='none'"> Estadísticas
      </a>
      <a routerLink="/abogado/opciones-bufete" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/bufete.png" alt="Bufete" onerror="this.style.display='none'"> Bufete
      </a>
      <a routerLink="/abogado/perfil" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/perfil.png" alt="Perfil" onerror="this.style.display='none'"> Perfil
      </a>
      <a routerLink="/abogado/chat" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/chat.png" alt="Chat" onerror="this.style.display='none'"> Chat
      </a>
      <a routerLink="/abogado/ayuda" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/ayuda.png" alt="Ayuda" onerror="this.style.display='none'"> Ayuda
      </a>
    </nav>

    <div class="sidebar-footer">
      <a href="#" class="menu-item logout" (click)="logout($event)">
        <img src="/Images/salir.png" alt="Salir" onerror="this.style.display='none'"> Salir
      </a>
    </div>
  </aside>

  <!-- SIDEBAR PARA ADMIN (ROL 3) -->
  <aside class="sidebar" [class.active]="isOpen" *ngIf="isAdmin()">
    <div class="sidebar-header">
      <div class="user-info-slide">
        <h3 class="user-name-slide">{{ userName }}</h3>
        <p class="user-role-slide">{{ userRole }}</p>
      </div>
      <button class="menu-close" (click)="closeSidebar()" aria-label="Cerrar menú">
        &times;
      </button>
    </div>

    <nav class="sidebar-menu">
      <a routerLink="/admin/inactivos" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/usuarios.png" alt="Inactivos" onerror="this.style.display='none'"> Usuarios Inactivos
      </a>
      <a routerLink="/admin/reportes" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/reportes.png" alt="Reportes" onerror="this.style.display='none'"> Reportes
      </a>

      <hr class="menu-divider" />

      <a routerLink="/usuario/home" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/home.png" alt="Cliente" onerror="this.style.display='none'"> Ver como Cliente
      </a>
      <a routerLink="/abogado/foro" routerLinkActive="active" class="menu-item" (click)="closeSidebar()">
        <img src="/Images/foro.png" alt="Abogado" onerror="this.style.display='none'"> Ver como Abogado
      </a>
    </nav>

    <div class="sidebar-footer">
      <a href="#" class="menu-item logout" (click)="logout($event)">
        <img src="/Images/salir.png" alt="Salir" onerror="this.style.display='none'"> Salir
      </a>
    </div>
  </aside>

  <!-- Contenido principal -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>
</div>