<div class="areas-legales-container">
<section class="areas-legales">
<h2>SELECCIONA TUS MATERIAS DE ESPECIALIDAD</h2>

@if (getSelectionStatus(); as status) {
  <div class="counter-status-bar">
    @if (status.current === 0) {
      <p id="counter-text" class="text-info">
        Selecciona hasta <strong>{{ status.max }}</strong> materias de especialidad ({{ status.current }}/{{ status.max }} seleccionadas)
      </p>
    } @else if (status.current === status.max) {
      <p id="counter-text" class="text-limit">
        Máximo alcanzado. Ya tienes <strong>{{ status.max }}</strong> especialidades ({{ status.current }}/{{ status.max }} seleccionadas)
      </p>
    } @else {
      <p id="counter-text" class="text-warning">
        Puedes seleccionar <strong>{{ status.remaining }}</strong> más ({{ status.current }}/{{ status.max }} seleccionadas)
      </p>
    }
  </div>
}

<div id="limit-message" class="limit-message">
    ⚠️ ¡Límite de {{ maxSelections() }} especialidades alcanzado!
</div>

<div class="cards-grid">
  @for (materia of materias; track materia.id) {
    <button 
      [id]="materia.id" 
      class="area" 
      [class.selected]="isSelected(materia.id)"
      (click)="handleAreaClick(materia.id)"
      aria-label="Seleccionar {{ materia.nombre }}"
    >
      <div class="area-inner">
        <img [src]="materia.icono" [alt]="'Icono ' + materia.nombre" class="area-icon" />
        
        <h3>{{ materia.nombre }}</h3>
        
        @if (materia.subtitulo) {
          <h4>{{ materia.subtitulo }}</h4>
        }
      </div>
    </button>
  }
</div>


</section>
</div>